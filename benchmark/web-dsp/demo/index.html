<html>
<head>
  <meta charset="UTF-8">
  <link rel="Stylesheet" href="style.css" type="text/css">
  <title>WASM Example</title>
</head>
<body>
  <header><h1>WebAssembly Video Editor</h1></header>
  <div id="git-link"><a href="https://github.com/shamadee/web-dsp">github.com/shamadee/web-dsp</a></div>
  <button id = "webcamButton" onclick="webcamToggle()">Switch to Webcam</button>
  <div id = 'editor'>
    <div id = 'middle-col'>
      <canvas id="c" width="720" height="486"></canvas>
      <video id="v" loop="false" autoplay style="display:none;" src="media/vid.mp4" type="video/mp4"></video>
      <div id = "controls">
        <div>
          <button id = "playButton" onclick="playToggle()"><img id = "playImg" alt = "Play Button" src = "img/pause1.svg"></button>
          <button id = "rewind" onclick="rewind()"><img id = "rewindImg" alt = "Rewind" src = "img/rewind1.svg"></button>
        </div>
        <h1 id = "vidTime">00:00:00:00</h1>
        <div>
          <button id = "fastForward" onclick="fastForward()"><img id = "fastForwardImg" alt = "Fast Forward" src = "img/forward1.svg"></button>
          <button id = "loopButton" onclick="loopToggle()"><img id = "loopImg" alt = "Loop On Off" src = "img/noloop1.svg"></button>
        </div>
      </div>
      <div id = "timing">
        <button id = "slowButton" onclick ="slowToggle()">Toggle Slow Motion</button>
        <button id = "fastButton" onclick ="fastToggle()">Toggle Fast Motion</button>
      </div>
    </div>
    <div id = "right-col">
      <div id = "statsContainer">
        <h2 id = "speedHead">Performance Comparison</h2>
        <p id="avg"></p>
        <div id = "stats">Loading..</div>
        <h3>Frame Rate. WASM = Green; JS = Blue;</h3>
        <canvas id = "statsCanvas" width = "400" height = "200"></canvas>
        <h3>Choppy Video? Disable Javascript below to see WebAssembly only</h3>
        <div id = "jsButtonDiv">
        <button id="jsButton" onclick="disableJS()">Disable Javascript</button>
        <button id = "jsCanvas" onclick="disableJsCanvas()">Hide JS Canvas</button>
        </div>
      </div>
    </div>
  </div>
  <div id='js-container'>
    <h1 id = "jsCanvasHeading">JS Example</h1>
    <canvas id="c2" width="640" height="360"></canvas>
    <video id="v2" loop autoplay style="display:none;"> 
      <source src="media/vid.mp4" type="video/mp4"/> 
    </video>
    <p>*Underground, rooster, mist, kaleidoscope, bacteria, hulk edge, ghost, twisted don't have exact JS filter equivalents</p>
  </div>
  </br>
  <script src="smoothie.js" type="text/javascript"></script>
  <script src="lib/webdsp.js" type="text/javascript"></script>
  <script src="lib/webdsp_polyfill.js" type="text/javascript"></script>
  <script src="demo.js" type="text/javascript"></script>
</body>
</html>

<!--Build math.c using 

emcc math.c -Os -s WASM=1 -s SIDE_MODULE=1 -o math.wasm-->
